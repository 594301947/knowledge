# 概念

+ LWP：light weight process 轻量级的进程，本质仍是进程（在linux环境下）。也有PCB，创建线程使用的底层函数和进程一样都是clone。是系统分配时间轮片的依据
+ 进程有独立的空间（0-4G的地址空间），拥有PCB。线程也有PBC，但是没有独立的地址空间（共享的）
+ 从内核上看进程和线程一样，都有各自不同的PCB，但是PCB中指向内存资源的三级页表是相同的
+ 进程可以蜕变成线程
+ 线程是最小的执行单位，进程是最小的分配资源单位
+ 线程可以看出是寄存器和栈的集合
+ 查看指定进程中的线程：ps -Lf pid(进程id)

# 共享资源和非共享资源

> **共享资源：**
>
> 1. 文件描述表
> 2. 每种**信号**的处理方式
> 3. 当前工作目录
> 4. 用户ID和组ID
> 5. 内存地址空间（.text/.data/.bss/heap/共享库）

> 非共享资源：
>
> 1. 线程id
> 2. 处理器现场和栈指针（内核栈）
> 3. 独立的栈空间（用户空间栈）
> 4. errno变量
> 5. 信号屏蔽字
> 6. 调度优先级
>
> **线程独享栈空间（内核栈和用户栈）

# 优缺点

> 优点：
>
> 1. 提高程序并发性
> 2. 开销小（多进程的话，要开辟多个地址空间）
> 3. 数据通信，共享数据方便

> 缺点：
>
> 1. 库函数，不稳定
> 2. 调试，编写困难，gdb不支持
> 3. 对信号支持不好

优先相对突出，缺点均不是硬伤。linux下由于实现方法导致进程，线程差别不是很大。