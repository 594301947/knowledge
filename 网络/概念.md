## 分层模型

OSI七层模型：物，数，网，传，会，表，应

TCP/IP四层模型：网（数据链路层/网络接口层），网，传，应

OSI七层模型中：应用层 + 表示层 + 会话层 = TPC/IP四层协议：应用层

OSI七层模型中：数据链路层 + 物理层 = TPC/IP四层协议：数据链路层



| OIS七层模型 | TCP/IP四层模型 | 协议                       |
| :---------- | :------------- | -------------------------- |
| 应用层      | 应用层         | http,ftp,nfs,ssh,telnet... |
| 表示层      |                |                            |
| 会话层      |                |                            |
| 传输层      | 传输层         | TCP,UDP                    |
| 网络层      | 网络层         | IP,ICMP,IGMP               |
| 数据链路层  | 数据链路层     | 以太网帧协议，ARP          |
| 物理层      |                |                            |

## 网络应用程序设计模型

C/S：Client/Server，也叫 客户机/服务器模式

B/S：Browser/Server，即浏览器/服务器结构



|      | C/S                                              | B/S                               |
| ---- | ------------------------------------------------ | --------------------------------- |
| 优点 | 缓存大量数据<br/>协议选择灵活<br/>速度快         | 安全性<br/>跨平台<br>开发工作量小 |
| 缺点 | 用自定义的协议安全性差<br>跨平台<br>开发工作量大 | 不能缓存大量数据<br>严格遵守http  |

## 传输

网络传输流程：数据没有封装之前，是不能在网络中传递。

数据封装过程：数据->应用层->网络层->链路层

## 协议

> ARP协议：根据IP地址获取mac地址
>
> 以太网帧协议：根据mac地址，寻找下一跳位置，完成数据包传输

> IP协议：
>
> ​	版本：IPv4，IPv6		-- 4位
>
> ​	TTL：time to live。	设置数据包在路由节点中的跳转上限。每经过一个路由节点，该值-1。当值位0时，将该数据包抛弃。
>
> ​	源IP：32位				   -- 4字节
>
> ​	目的IP：32位		       -- 4字节
>
> IP地址：可以在网络环境中，唯一标识一台主机
>
> 端口：可以在网络的一台主机上，唯一标识一个进程
>
> IP地址+端口号：可以在网络环境中，唯一标识一个进程

> UDP协议：
>
> ​	16位：源端口号	2^16 = 65536
>
> ​	16位：目的端口号

> TCP协议：
>
> ​	16位：源端口号	2^16 = 65536
>
> ​	16位：目的端口号
>
> ​	32位：序号
>
> ​	32位：确认序号
>
> ​	6个标志位
>
> ​	16位窗口大小。	2^16 = 65536

## 网络套接字（socket）

* socket：一个文件描述符指向一个套接字（**该套接字内部由内核借助两个缓冲区实现**）

* 在通信过程中，套接字一定是成对出现

* 网络字节序：

  > 网络字节序是大端法。本地字节序是小端法。所以网络字节序和本地字节序需要互相转换。
>
    > 小端法：高位存高地址，。低位存低地址
    >
    > 大端法：高位存低地址，。高位存低地址
    >
    > 地址：0x12345678
    >
    > |      | 小端法 | 大端法 |
    > | ---- | ------ | ------ |
    > | 高位 | 12     | 78     |
    > |      | 34     | 56     |
    > |      | 56     | 34     |
    > | 低位 | 78     | 12     |